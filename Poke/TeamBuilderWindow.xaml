<Window x:Class="Poke.TeamBuilderWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:poke="clr-namespace:Poke;assembly=Core"
        Title="Team Builder"
        SizeToContent="Height"
        ResizeMode="NoResize"
        Width="780">
    <DockPanel>
        <Label Content="Works only if 6 Pokemon with 4 moves are selected."
               DockPanel.Dock="Top"
               Margin="5"/>
        
        <ScrollViewer>
            <ItemsControl ItemsSource="{Binding Members}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel ItemWidth="250"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="0.3"
                                BorderBrush="#77333333"
                                Margin="10"
                                Padding="10">
                            <DockPanel>
                                <Grid DockPanel.Dock="Bottom">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    
                                    <ComboBox ItemsSource="{Binding AvailableMoves}"
                                              DisplayMemberPath="Name"
                                              SelectedValue="{Binding Move1}"
                                              Margin="2"/>

                                    <ComboBox ItemsSource="{Binding AvailableMoves}"
                                              DisplayMemberPath="Name"
                                              SelectedValue="{Binding Move2}"
                                              Margin="2"
                                              Grid.Column="1"/>

                                    <ComboBox ItemsSource="{Binding AvailableMoves}"
                                              DisplayMemberPath="Name"
                                              SelectedValue="{Binding Move3}"
                                              Margin="2"
                                              Grid.Row="1"/>

                                    <ComboBox ItemsSource="{Binding AvailableMoves}"
                                              DisplayMemberPath="Name"
                                              SelectedValue="{Binding Move4}"
                                              Margin="2"
                                              Grid.Row="1"
                                              Grid.Column="1"/>
                                </Grid>

                                <TextBlock Text="Moves"
                                           Style="{StaticResource Title}"
                                           FontSize="15"
                                           DockPanel.Dock="Bottom"/>

                                <Image Source="{Binding AsyncValue}"
                                       Width="70"
                                       VerticalAlignment="Top"
                                       Margin="0,10">
                                    <Image.DataContext>
                                        <MultiBinding Converter="{StaticResource PokemonSpriteConverter}"
                                                      ConverterParameter="Front">
                                            <MultiBinding.Bindings>
                                                <Binding Path="Species"/>
                                            </MultiBinding.Bindings>
                                        </MultiBinding>
                                    </Image.DataContext>
                                </Image>

                                <StackPanel>
                                    <Label Content="Species"/>

                                    <ComboBox DisplayMemberPath="Name"
                                              ItemsSource="{Binding AvailablePokemon}"
                                              SelectedValue="{Binding Species}"
                                              Margin="0,2"/>

                                    <Label Content="Nickname"/>

                                    <TextBox Text="{Binding Name}"
                                             Margin="0,2"/>

                                    <Label Content="Held Item"/>

                                    <ComboBox DisplayMemberPath="Name"
                                              ItemsSource="{x:Static poke:Lists.MegaStones}"
                                              SelectedValue="{Binding HeldItem}"
                                              Margin="0,2"/>
                                </StackPanel>
                            </DockPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </DockPanel>
</Window>
